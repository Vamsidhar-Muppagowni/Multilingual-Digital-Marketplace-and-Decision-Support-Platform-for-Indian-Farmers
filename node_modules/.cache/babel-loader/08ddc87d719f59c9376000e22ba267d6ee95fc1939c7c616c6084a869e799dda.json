{"ast":null,"code":"export const getWeather = async (lat, lon) => {\n  try {\n    // Fetch Weather\n    const weatherResponse = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,is_day,weather_code&timezone=auto`);\n    const weatherData = await weatherResponse.json();\n\n    // Fetch Location Name (Reverse Geocoding)\n    let locationName = \"Unknown Location\";\n    try {\n      const geoResponse = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`);\n      const geoData = await geoResponse.json();\n      // detailed locality or city or locality\n      locationName = geoData.locality || geoData.city || geoData.principalSubdivision || \"Your Area\";\n    } catch (err) {\n      console.warn(\"Location fetch failed\", err);\n    }\n    if (!weatherData.current) {\n      throw new Error(\"No weather data found\");\n    }\n    return {\n      temp: Math.round(weatherData.current.temperature_2m),\n      isDay: weatherData.current.is_day === 1,\n      code: weatherData.current.weather_code,\n      location: locationName\n    };\n  } catch (error) {\n    console.error(\"Weather fetch failed:\", error);\n    return null;\n  }\n};\nexport const getWeatherDescription = code => {\n  // WMO Weather interpretation codes (https://open-meteo.com/en/docs)\n  const codes = {\n    0: \"weather_0\",\n    1: \"weather_1\",\n    2: \"weather_2\",\n    3: \"weather_3\",\n    45: \"weather_45\",\n    48: \"weather_48\",\n    51: \"weather_51\",\n    53: \"weather_53\",\n    55: \"weather_55\",\n    61: \"weather_61\",\n    63: \"weather_63\",\n    65: \"weather_65\",\n    71: \"weather_71\",\n    73: \"weather_73\",\n    75: \"weather_75\",\n    95: \"weather_95\"\n  };\n  return codes[code] || \"weather_variable\";\n};","map":{"version":3,"names":["getWeather","lat","lon","weatherResponse","fetch","weatherData","json","locationName","geoResponse","geoData","locality","city","principalSubdivision","err","console","warn","current","Error","temp","Math","round","temperature_2m","isDay","is_day","code","weather_code","location","error","getWeatherDescription","codes"],"sources":["C:/Users/vamsi/Multilingual-Digital-Marketplace-and-Decision-Support-Platform-for-Indian-Farmers/src/services/WeatherService.js"],"sourcesContent":["\r\nexport const getWeather = async (lat, lon) => {\r\n    try {\r\n        // Fetch Weather\r\n        const weatherResponse = await fetch(\r\n            `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,is_day,weather_code&timezone=auto`\r\n        );\r\n        const weatherData = await weatherResponse.json();\r\n\r\n        // Fetch Location Name (Reverse Geocoding)\r\n        let locationName = \"Unknown Location\";\r\n        try {\r\n            const geoResponse = await fetch(\r\n                `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`\r\n            );\r\n            const geoData = await geoResponse.json();\r\n            // detailed locality or city or locality\r\n            locationName = geoData.locality || geoData.city || geoData.principalSubdivision || \"Your Area\";\r\n        } catch (err) {\r\n            console.warn(\"Location fetch failed\", err);\r\n        }\r\n\r\n        if (!weatherData.current) {\r\n            throw new Error(\"No weather data found\");\r\n        }\r\n\r\n        return {\r\n            temp: Math.round(weatherData.current.temperature_2m),\r\n            isDay: weatherData.current.is_day === 1,\r\n            code: weatherData.current.weather_code,\r\n            location: locationName\r\n        };\r\n    } catch (error) {\r\n        console.error(\"Weather fetch failed:\", error);\r\n        return null;\r\n    }\r\n};\r\n\r\nexport const getWeatherDescription = (code) => {\r\n    // WMO Weather interpretation codes (https://open-meteo.com/en/docs)\r\n    const codes = {\r\n        0: \"weather_0\",\r\n        1: \"weather_1\",\r\n        2: \"weather_2\",\r\n        3: \"weather_3\",\r\n        45: \"weather_45\",\r\n        48: \"weather_48\",\r\n        51: \"weather_51\",\r\n        53: \"weather_53\",\r\n        55: \"weather_55\",\r\n        61: \"weather_61\",\r\n        63: \"weather_63\",\r\n        65: \"weather_65\",\r\n        71: \"weather_71\",\r\n        73: \"weather_73\",\r\n        75: \"weather_75\",\r\n        95: \"weather_95\",\r\n    };\r\n    return codes[code] || \"weather_variable\";\r\n};\r\n"],"mappings":"AACA,OAAO,MAAMA,UAAU,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EAC1C,IAAI;IACA;IACA,MAAMC,eAAe,GAAG,MAAMC,KAAK,CAC/B,mDAAmDH,GAAG,cAAcC,GAAG,2DAC3E,CAAC;IACD,MAAMG,WAAW,GAAG,MAAMF,eAAe,CAACG,IAAI,CAAC,CAAC;;IAEhD;IACA,IAAIC,YAAY,GAAG,kBAAkB;IACrC,IAAI;MACA,MAAMC,WAAW,GAAG,MAAMJ,KAAK,CAC3B,qEAAqEH,GAAG,cAAcC,GAAG,sBAC7F,CAAC;MACD,MAAMO,OAAO,GAAG,MAAMD,WAAW,CAACF,IAAI,CAAC,CAAC;MACxC;MACAC,YAAY,GAAGE,OAAO,CAACC,QAAQ,IAAID,OAAO,CAACE,IAAI,IAAIF,OAAO,CAACG,oBAAoB,IAAI,WAAW;IAClG,CAAC,CAAC,OAAOC,GAAG,EAAE;MACVC,OAAO,CAACC,IAAI,CAAC,uBAAuB,EAAEF,GAAG,CAAC;IAC9C;IAEA,IAAI,CAACR,WAAW,CAACW,OAAO,EAAE;MACtB,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;IAC5C;IAEA,OAAO;MACHC,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACf,WAAW,CAACW,OAAO,CAACK,cAAc,CAAC;MACpDC,KAAK,EAAEjB,WAAW,CAACW,OAAO,CAACO,MAAM,KAAK,CAAC;MACvCC,IAAI,EAAEnB,WAAW,CAACW,OAAO,CAACS,YAAY;MACtCC,QAAQ,EAAEnB;IACd,CAAC;EACL,CAAC,CAAC,OAAOoB,KAAK,EAAE;IACZb,OAAO,CAACa,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC7C,OAAO,IAAI;EACf;AACJ,CAAC;AAED,OAAO,MAAMC,qBAAqB,GAAIJ,IAAI,IAAK;EAC3C;EACA,MAAMK,KAAK,GAAG;IACV,CAAC,EAAE,WAAW;IACd,CAAC,EAAE,WAAW;IACd,CAAC,EAAE,WAAW;IACd,CAAC,EAAE,WAAW;IACd,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE,YAAY;IAChB,EAAE,EAAE;EACR,CAAC;EACD,OAAOA,KAAK,CAACL,IAAI,CAAC,IAAI,kBAAkB;AAC5C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}